<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Membership • Triple Burrry</title>
    <link rel="stylesheet" href="css/Home.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Open+Sans&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --ink: #2b2b2b;
            --line: #e6e3da;
            --paper: #f7f6f2;
            --olive: #aeb6a2;
        }

        .container {
            max-width: 820px;
            margin: 0 auto;
            padding: 22px
        }

        .hero {
            padding: 26px 0;
            text-align: center;
            background: var(--paper);
            border: 1px solid var(--line);
            border-radius: 18px
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            margin: .4rem 0
        }

        .hero p {
            color: #666;
            margin: 0
        }

        .card {
            background: #fff;
            border: 1px solid #eee;
            border-radius: 18px;
            padding: 18px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, .04)
        }

        form {
            display: grid;
            gap: 12px;
            max-width: 560px;
            margin: 0 auto
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px
        }

        input,
        select {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 12px
        }

        .hint {
            color: #666;
            font-size: .92rem
        }

        .btn {
            display: inline-block;
            padding: 10px 16px;
            border-radius: 999px;
            border: 1px solid var(--ink);
            background: #fff;
            text-decoration: none;
            color: #111;
            cursor: pointer
        }

        .btn-primary {
            background: var(--olive);
            border-color: var(--olive);
            color: #fff
        }

        .center {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap
        }

        .note {
            background: #fafafa;
            border: 1px dashed #ddd;
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            color: #555
        }

        @media(max-width:768px) {
            .row {
                grid-template-columns: 1fr
            }
        }

        /* Modal */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, .45);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 99
        }

        .modal {
            background: #fff;
            border-radius: 20px;
            width: min(420px, 90%);
            padding: 20px;
            text-align: center;
            border: 1px solid var(--line)
        }

        .modal .icon {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            margin: 0 auto 10px;
            background: var(--olive);
            color: #fff;
            font-size: 28px
        }

        .modal h3 {
            margin: .2rem 0 .4rem 0
        }

        .modal p {
            margin: 0 0 12px 0;
            color: #555
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <img src="img/Homeimg/Loco_tripple.png" alt="Loco">
        <ul class="nav-links">
            <li><a href="./Home.html">HOME</a></li>
            <li class="dropdown">
                <a href="./Shop/ShopMain.html">SHOP</a>
                <ul class="dropdown-menu level-1">
                    <li class="dropdown">
                        <a href="#">Male</a>
                        <ul class="dropdown-menu level-2">
                            <li class="dropdown">
                                <a href="#">Clothing</a>
                                <ul class="dropdown-menu level-3">
                                    <li><a href="./Shop/Male/T-shirtMale.html">T-shirt</a></li>
                                    <li><a href="./Shop/Male/TankTopMale.html">Tank Top</a></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#">Pants</a>
                                <ul class="dropdown-menu level-3">
                                    <li><a href="./Shop/Male/JeansMale.html">Jeans</a></li>
                                    <li><a href="./Shop/Male/SkirtMale.html">Skirt</a></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#">Accessories</a>
                                <ul class="dropdown-menu level-3">
                                    <li><a href="./Shop/Male/BagMale.html">Bag</a></li>
                                    <li><a href="./Shop/Male/BraceletMale.html">Bracelet</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <a href="#">Female</a>
                        <ul class="dropdown-menu level-2">
                            <li class="dropdown">
                                <a href="#">Clothing</a>
                                <ul class="dropdown-menu level-3">
                                    <li><a href="./Shop/Female/T-shirt.html">T-shirt</a></li>
                                    <li><a href="./Shop/Female/TankTop.html">Tank Top</a></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#">Pants</a>
                                <ul class="dropdown-menu level-3">
                                    <li><a href="./Shop/Female/Jeans.html">Jeans</a></li>
                                    <li><a href="./Shop/Female/Skirt.html">Skirt</a></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#">Accessories</a>
                                <ul class="dropdown-menu level-3">
                                    <li><a href="./Shop/Female/Bag.html">Bag</a></li>
                                    <li><a href="./Shop/Female/Bracelet.html">Bracelet</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>

            <li><a href="./Collection.html">COLLECTION</a></li>
            <li><a href="./AboutUs.html">ABOUT US</a></li>
        </ul>

        <div class="icons">
            <div class="search-bar">
                <input type="text" placeholder="Search..." />
                <button type="submit">
                    <img src="https://img.icons8.com/?size=100&id=LnlEQU5pxlIU&format=png&color=000000"
                        alt="Search Icon">
                </button>
            </div>

            <a href="./MyCart.html" class="icon-link">
                <img src="https://img.icons8.com/?size=100&id=15893&format=png&color=000000" alt="Cart Icon">
            </a>

            <a href="./Profile.html" class="icon-link">
                <img src="https://img.icons8.com/?size=100&id=15265&format=png&color=000000" alt="Profile Icon">
            </a>
        </div>
    </nav>

    <div class="container">
        <section class="hero">
            <span class="mship-kicker">Join Now</span>
            <h1>Triple Burrry Membership</h1>
            <p>Earn points, birthday coupons, and early access to new drops.</p>
        </section>

        <section id="join" class="card" style="margin-top:18px;">
            <h2 style="text-align:center; margin:6px 0 14px;">Register</h2>

            <div id="alreadyBox" class="note" style="display:none; margin-bottom:10px">
                You’re already a member on this device.
                <div style="margin-top:6px" class="center">
                    <a class="btn" href="./membership.html">View membership</a>
                    <button id="clearLocal" class="btn">Clear & re-register</button>
                </div>
            </div>

            <form id="joinForm" novalidate>
                <div class="row">
                    <div>
                        <label>Full name</label>
                        <input name="fullName" required placeholder="e.g., Jane Doe">
                    </div>
                    <div>
                        <label>Email</label>
                        <input name="email" type="email" required placeholder="you@email.com">
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label>Birthday</label>
                        <input name="birthday" type="date" required>
                    </div>
                    <div>
                        <label>Main interest</label>
                        <select name="interest">
                            <option value="cloth">Clothing</option>
                            <option value="pant">Pants</option>
                            <option value="accessories">Accessories</option>
                        </select>
                    </div>
                </div>
                <label class="hint">
                    <input name="consent" type="checkbox" required>
                    I agree to receive member perks & updates
                </label>

                <div class="center">
                    <button class="btn btn-primary" type="submit" id="submitBtn">Create account</button>
                    <a class="btn" href="./Home.html">Back to Home</a>
                </div>
                <p id="joinMsg" class="hint" style="text-align:center;margin:6px 0 0;"></p>
            </form>
        </section>
    </div>

    <!-- Success Popup -->
    <div id="successModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="okTitle">
        <div class="modal">
            <div class="icon">✓</div>
            <h3 id="okTitle">Welcome to Triple Burrry!</h3>
            <p>Your membership was created successfully.</p>
            <a class="btn btn-primary" href="./Home.html">Back to Home</a>
            <div style="margin-top:6px" class="hint">Redirecting in 2s…</div>
        </div>
    </div>

    <script>
        const KEY = 'tb_member';

        function showModal() {
            const m = document.getElementById('successModal');
            m.style.display = 'flex';
            setTimeout(() => { window.location.href = './Home.html'; }, 2000);
        }

        function emailValid(e) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);
        }

        function prefillIfExists() {
            const box = document.getElementById('alreadyBox');
            const data = JSON.parse(localStorage.getItem(KEY) || 'null');
            if (!data) { box.style.display = 'none'; return; }
            box.style.display = 'block';
            const f = document.getElementById('joinForm');
            f.fullName.value = data.fullName || '';
            f.email.value = data.email || '';
            f.birthday.value = data.birthday || '';
            f.interest.value = data.interest || 'cloth';
        }

        document.getElementById('clearLocal').addEventListener('click', () => {
            localStorage.removeItem(KEY);
            prefillIfExists();
        });

        document.getElementById('joinForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const f = new FormData(this);
            const name = (f.get('fullName') || '').trim();
            const email = (f.get('email') || '').trim();
            const birthday = f.get('birthday');
            const interest = f.get('interest');
            const consent = !!f.get('consent');

            const msg = document.getElementById('joinMsg');
            const btn = document.getElementById('submitBtn');

            if (!name || !email || !birthday || !consent) {
                msg.textContent = 'Please complete all required fields.'; return;
            }
            if (!emailValid(email)) {
                msg.textContent = 'Please enter a valid email.'; return;
            }

            btn.disabled = true;
            msg.textContent = 'Creating your membership…';

            const data = {
                fullName: name,
                email,
                birthday,
                interest,
                consent,
                status: 'active',
                points: 0,
                joinedAt: new Date().toISOString()
            };
            localStorage.setItem(KEY, JSON.stringify(data));

            // success
            showModal();
        });

        document.addEventListener('DOMContentLoaded', prefillIfExists);
    </script>
</body>

</html>